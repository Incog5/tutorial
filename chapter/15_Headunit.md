# ของขวัญปีใหม่สำหรับการเดินทางวันหยุดปีใหม่ 2559
## Key Contributors (Alphabetical order)
- @borconi, @gartnera, @izacus, @lmagder, @mikereidis, @spadival

#ข้อตกลง
ข้อตกลงการใช้ซอฟต์แวร์โอเพ่นซอร์ส มีเพื่อให้ผู้ใช้ได้อ่านและทำความเข้าใจแนวคิดการใช้ซอฟต์แวร์โอเพ่นซอร์สก่อนตัดสินใจใช้ มีบ่อยครั้งที่ผู้ใช้และนักพัฒนามองไม่ตรงกันทำให้เกิดความขัดแย้งในภายหลัง สาเหตุความขัดแย้งนั้นเกิดจากนักพัฒนาซอฟต์แวร์โอเพ่นซอร์สเผยแพร่ซอสโค้ดเพราะคาดหวังจะได้รับความร่วมมือพัฒนาไปด้วยกันเช่นพบปัญหาแล้วจะมีคนช่วยแก้ไข ขณะที่มุมผู้ใช้คือผู้ใช้ซอฟต์แวร์ มีลักษณะเป็นผู้ขายและผู้ซื้อ คิดว่าผู้ซื้อมีสิทธิ์ติ/ชม วิจารณ์ เสนอแนวทางที่ควรเป็น เมื่อความเห็นจุดนี้ไม่ตรงกันทำให้เกิดความขัดแยัง ส่งผลให้นักพัฒนาหยุดเผยแพร่ บ่อยครั้งที่พบปัญหาระหว่างผู้ใช้กับนักพัฒนาซอฟต์แวร์โอเพ่นซอร์สเพียงเพราะผู้ใช้แนะนำว่าควรทำอย่างนั้นอย่างนี้ ลองอ่านกรณีตัวอย่าง
* คุณ Diginix(นักพัฒนา) , คุณchampionway(ผู้ใช้)  โพสในกรณีมีผู้ใช้กล่าวว่า speedometer ทำให้หน้าจอค้าง [#2351](http://mazda3revolution.com/forums/2014-2016-mazda-3-skyactiv-audio-electronics/122458-aio-all-one-tweaks-236.html) คุณ championway เป็นทั้งผู้ใช้ผู้พัฒนามีตอบช่วยเหลือเพื่อนสมาชิกบ้าง แต่เขาคาดหวังว่าจะได้รับการช่วยเหลือจากนักพัฒนามากเกินไป เช่น การช่วยผู้ใช้ในกรณีปัญหาไม่ได้เกิดจากซอฟต์แวร์ แต่เป็นปัญหาจากผู้ใช้ไม่ใช้งานตามคุณสมบัติซอฟต์แวร์
* คุณ @flyandi กับผู้ใช้ที่ดูvideo คุณ @mabadse [#225](http://mazda3revolution.com/forums/2014-2016-mazda-3-skyactiv-audio-electronics/123882-custom-applications-sdk-write-deploy-your-own-applications-23.html#post1650682) แล้วไม่ทำงานอย่างหวังไว้ ผู้ใช้ส่งข้อความต่อว่าคุณ @flyandi เชื่อว่านี่เป็นสาเหตุให้ คุณ @flyandi หยุดพัฒนาซอฟต์แวร์

เมื่อตัดสินใจเลือกใช้ซอฟต์แวร์ฟรีและโอเพ่นซอร์ส ควรปรับแนวคิดให้เป็นในทางที่ชุมชนโอเพ่นซอร์สคาดหวัง อย่างน้อยควรเข้าใจ ว่าไม่เหมือนการใช้ซอฟต์แวร์ทางการค้า ท่านเลือกได้ว่าจะใช้หรือไม่ใช้ด้วยตนเอง หากเลือกใช้ควรยอมรับ[ค่านิยมโอเพ่นซอร์ส](https://thaiopensource.org/ค่านิยมโอเพ่นซอร์ส/)

## สำหรับผู้ชื่นชอบที่มาที่ไป
"Unofficial Android Auto (headunit V0.94 mod @izacus)" เป็นฟรีซอฟต์แวร์และโอเพ่นซอร์ส เก็บซอสโค้ดที่ https://github.com/gartnera/headunit เปิดดาวน์โหลดวันที่ 14ธค.2559 ซอฟต์แวร์นี้มีชื่อ `headunit` จากการโหวตในเว็บ xda เป็นซอฟต์แวร์ติดตั้งในรถยนต์มาสด้าสกายแอคทีฟที่มีหน้าจอ 7" เราเรียกซอฟต์แวร์ว่า MZD Connect เรียกเครื่องเสียงว่า CMU (Connectivity Master  Unit)
`headunit` เป็นซอฟต์แวร์ที่ @mikereidis เขียนขึ้นใหม่ทั้งหมดเพื่อใช้กับ android tablet ต่อมา @spadival ปรับปรุงใช้กับ CMU ได้สำเร็จและถูกพัฒนาเรื่อยมา หนึ่งปีที่ผ่านมาได้ผ่านอุปสรรคมาพอสมควร ปลายเดือนพฤษภาคม2559 แอนดรอยด์ได้ปรับปรุงการสื่อสารระหว่างซอฟต์แวร์แอนดรอยด์กับ Google Play Service เป็นผลให้ `headunit` ทำงานไม่ได้ ต่อมา @borconi พบวิธีทำให้กลับมาใช้ได้ดังเดิม ในช่วงเดียวกัน @gartnera พัฒนาซอฟต์แวร์ เพื่อให้ทำงานได้ใกล้เคียงแอนดรอยด์ออโต้จริง ให้สามารถควบคุมแอนดรอยด์ออโต้ผ่านแผงควบคุมบนพวงมาลัย ซึ่งใช้ซอฟต์แวร์ที่พัฒนาโดย @jmgao ชื่อ mazda-connect ใช้โปรแกรม `input_filter` แต่วิธีควบคุมผ่านแผงพวงมาลัยกลายเป็นต้นเหตทำให้ Factory Reset แล้วหน้าจอค้าง

ผมเขียนบทความนี้เพราะรู้สาเหตุปัญหา Factory Reset และแก้ไขได้แล้ว สาเหตุนั้นอ่านได้ที่ [#1](13_AndroidAuto.md) ประเด็นหลักคือ `input_filter` เก็บไฟล์ไว้ที่ `/tmp/mnt/data/` ซึ่ง `input_filter` ถูกเรียกในไฟล์ `sm.conf` @lmagder พบว่าเมื่อทำ Factory Reset จะลบไฟล์ใน `/tmp/mnt/data/` เป็นสาเหตุให้หน้าจอค้าง ผมเขียนความจำเป็นที่ต้องเก็บใน `/tmp/mnt/data/` และเหตุผลที่ไม่ต้องเก็บใน `/tmp/mnt/data/` ที่ [#1](13_AndroidAuto.md) สรุปได้ว่าเรารู้สาเหตุและแก้ปัญหาด้วยวิธีไม่เก็บข้อมูลใน `/tmp/mnt/data/` อีกต่อไป

## Unofficial Android Auto (headunit V0.94 mod @izacus)
### เฟิร์มแวร์ที่รองรับ
* 56.00.100/230/240/513-ADR

### ไม่รองรับ
* 58.00.XX
* 59.00.XX
ปัญหาอยู่ที่เมนูรายชื่อ applications ไม่เหมือนเดิม ทำให้โปรแกรมไม่ทำงาน 

### คุณสมบัติ
* ควบคุม AA ผ่านแผงควบคุมพวงมาลัย
* กด Next , Previous เพื่อเล่นเพลงจาก Google Play ได้แล้ว
* ควบคุม AA ด้วย Command Knob ได้ 5ทิศทาง
* รองรับคำสั่ง "OK กูเกิ้ล" (สำเนียงไทย)
* รองรับภาษาไทย อักษรได้ในแผนที่, อ่านออกเสียงไทย (เมื่อกำหนดโทรศัพท์เป็นไทย)
* สีระบุความหนาแน่นการจราจรรีลไทม์ เหมือน google map
* ปรับปรุงเส้นทางอัตโนมัติ

### ปัญหาที่พบ
* ตอบสนองช้าเมื่อค้นหาเส้นทางด้วยการพิมพ์อักษร
* พบปัญหาการรับ/โทร ขณะใช้งาน AA

### ภาพรีวิว
#### พิสูจน์แก้ปัญหา Factory Reset
#### Command Knob control
#### Voice Command
#### Steering wheel button control

### Download
* MZD-AIO-TI 2.0.2 Beta Test : (https://dl.bintray.com/trevelopment/AIO-Updates/MZD_AIO_TI-Setup-2.0.0.exe)
* หรือใช้โปรแกรมสำเร็จ AR4(ดูหนังนำทาง) : https://github.com/mzdonline/AR4/releases
